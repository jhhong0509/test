# @Builder

### 빌더 패턴이란?

기존의 생성자로 인스턴스를 만들던 것을 보완하기 위해서 나온 디자인 패턴이다.



기존의 생성자로 인스턴스를 만들던 방법은 호출 코드만 봤을 때 어떤 역할인지 알 수 없어서 개발자에게 생성자의 매개변수를 암기를 요구하는 단점이 있었다.

게다가 생성자의 인자를 변경하게 되면 코드를 수정하기 어려웠다.



그래서 나온게 자바빈 패턴으로, setter 메소드를 통해 인스턴스를 수정하는 방법이었다.

하지만 setter를 이용하는 방법은 **객체가 변할 수 있게 되는데, 이건 개발에서 큰 실수를 만들기 쉽다**.

> 웬만하면 불변 객체로 만드는게 좋다.

물론 빌더 패턴에도 단점은 있다.

빌더를 생성해야 한다는 것인데, 크게 소비하지 않긴 하지만 성능이 민감한 서비스라면 문제가 될 수 있다.



### Lombok의 @Builder

Lombok은 Builder를 자동으로 만들어주는 `@Builder` 어노테이션을 지원한다.

> Lombok은 Annotation Processor Tool(APT) 이기 때문에 해당 어노테이션이 붙어있으면 컴파일 단계에서 알아서 추가된다.

또한 toBuilder 라는 속성을 true로 바꿔주게 되면, **인스턴스를 바꿔서 새로 만드는 것**이 가능하다.

즉 A라는 인스턴스에 a,b 라는 값이 있을 때, a라는 값을 c로 toBuilder로 바꾸게 되면 c,b라는 값을 가진 인스턴스가 **새로** 생기게 된다.



### @SuperBuilder

원래 `@Builder`는 **상속 관계에서 부모 필드는 초기화 하지 못한다.**

그렇기 때문에 생긴게 `@SuperBuilder`이다.

부모 클래스의 엔티티를 `@Builder`자식의 Builder에 추가해 주는 역할을 한다.



**반드시 부모 엔티티와 자식 엔티티 모두 `@SuperBuilder`를 사용해야 한다.**

또한 만약 toBuilder를 사용하고 싶으면 부모 엔티티의 `@SuperBuilder`와 자식 엔티티의 `@SuperBuilder` 모두 속성을 줘야 한다.

