# DB 용어

### 인덱스

> 인덱스란, 책의 목차 처럼 데이터베이스에서 빠르게 내용을 찾기 위해 메모리에 값을 넣어두는 것

- 인덱스가 없다면

  > 100000건의 데이터가 있다고 가정해 보자.
  >
  > SELECT문은 모든 로우를 순회하면서 데이터를 찾아야 한다.

- 인덱스의 사용

  > 위와 같은 상황에서, 우리는 순회를 위한 테이블을 만들어 주면 된다.
  >
  > 기본적으로 정렬이 되어있는 인덱스 테이블 이라고 가정하고, 검색에 필요한 내용 외의 속성들은 없이, id만 넣어준다.
  >
  > 만약 "java"라는 문자열을 검색할 때, java라는 문자열을 순회하던 도중, java가 아닌 다른 문자열이 나온다면, 순회를 종료할 수 있다.
  >
  > 또한 BTREE 구조로 저장하기 때문에 검색이 빠르다.
  >
  > > BTREE란, 자식 노드가 2개 이상인 트리 구조를 이야기 한다.
  >
  > 이러한 방식을 통해, index에서 rowid를 찾아 검색하면 된다.
  >
  > > index에서 rowid를 찾아 결국 원래 테이블에 검색하면 무슨 의미가 있을까 싶지만, id는 검색이 아닌 실제 고유 주소값을 통해 접근할 수 있기 때문에 빠르게 접근할 수 있다.
  >
  > > rowid는 단순한 auto_increment 처럼 생기지 않았다.
  > >
  > > rowid는 데이터 오브젝트 번호, 파일 번호, BLOCK 번호, ROW 번호로 구성되어 있다.

- 인덱스 생성 명령어

  > CREATE INDEX category ON book(category)
  >
  > 위와 같은 형태를 통해 간단하게 구현할 수 있다.

- 단점
  1. 인덱스를 위한 추가 공간이 필요하다
  2. 생성에 시간이 걸릴 수 있다.
  3. INSERT, UPDATE, DELETE가 자주 발생하면 성능이 하락할 수 있다.

- 클러스터형 인덱스

  > 테이블당 하나만 생성 가능한 인덱스
  >
  > 행 데이터를 지정한 열에 맞춰서 자동 정렬
  >
  > 기본적으로 순서대로 정렬되어 있다.
  >
  > 속도가 비클러스터형 인덱스 보다 빠르다.

- 비클러스터형 인덱스

  > 테이블당 여러개를 만들 수 있다.

- 인덱스의 생성
  1. 열 단위로 생성된다.
  2. 테이블 생성 시에 PK를 지정하면 자동으로 클러스터형 인덱스가 생성된다.
  3. 제약조건 없이는 생성할 수 없으며, 열의 제한 조건은 PK와 Unique다.

### 식별자(Identifier)

> 하나의 Entity에서, 각각의 로우를 유일하게 구분해 주는 단일 속성 또는 속성 그룹
>
> 검색이나 조인에서 중요하게 작용한다.

- 슈퍼키(Super Key)

  > 튜플을 유일하게 구분할 수 있는 모든 속성이다.

- 후보키(Candidate Key)

  > 하나의 Entity 안에서 각각의 로우를 유일하게 구분해 주는 하나 또는 여러개의 속성.
  >
  > PK가 될 수 있는 녀석들 이다.

- 기본키(Primary Key)

  > 인스턴스를 유일하게 식별하는데 가장 적합한 키
  >
  > 후보키중 선정됨

  - 기본키 선정 기준
    1. 해당 실체를 대표해야 함
    2. 업무적 활용도가 높아야 함
    3. 길이가 짧아야 함

  - 기본키의 기본적 속성
    1. Not Null
    2. No Duplicate(중복 불가)
    3. 한 테이블당 하나

- 대체키

  > 하나의 속성으로 기본키를 구성할 수 없는 경우 둘 이상의 컬럼을 묶게 되는데, 이를 복합키 라고 한다.
  >
  > 인덱스의 생성은 먼저 정의한 컬럼을 기준으로 생성되기 때문에, 주로 조회를 할 때 사용되는 복합키를 앞에 두는 것이 좋다.

  - 먼저 두는 기준

    > 실제로 어떤 속성을 통해 검색하는지에 따라 결정한다.

    > 만약 둘 다 비슷하다면, 순서에 따라 차례대로 저장될 수 있는 속성이 좋다 ex) 날짜 등

- 대리키

  > 식별자가 너무 길거나, 속성이 여러개 일 때 인위적으로 추가하는 식별자 이다.
  >
  > 외부키가 단일해지기 때문에 조인의 속도를 향상시키기 위해 사용된다.
  >
  > 예를 들어, 우리가 주로 사용하는 AUTO_INCREMENT를 통한 고유 id를 만드는게 포함된다.